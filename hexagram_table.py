# 정확한 64괘 테이블 (2025년 최종 확정)
# 각 괘는 (괘이름, 이진패턴, 한자명) 형태로 구성
# 이진패턴: 1=양효(⚊), 2=음효(⚋)
# 순서: 1효(아래) → 6효(위)

HEXAGRAM_TABLE = {
    1: ("1괘", "111111", "건위천(乾爲天)"),
    2: ("2괘", "222222", "곤위지(坤爲地)"),
    3: ("3괘", "122212", "수뢰둔(水雷屯)"),
    4: ("4괘", "212221", "산수몽(山水蒙)"),
    5: ("5괘", "111212", "수천수(水天需)"),
    6: ("6괘", "212111", "천수송(天水訟)"),
    7: ("7괘", "212222", "지수사(地水師)"),
    8: ("8괘", "222212", "수지비(水地比)"),
    9: ("9괘", "111211", "풍천소축(風天小畜)"),
    10: ("10괘", "112111", "천택리(天澤履)"),
    11: ("11괘", "111222", "지천태(地天泰)"),
    12: ("12괘", "222111", "천지비(天地否)"),
    13: ("13괘", "121111", "천화동인(天火同人)"),
    14: ("14괘", "111121", "화천대유(火天大有)"),
    15: ("15괘", "221222", "지산겸(地山謙)"),
    16: ("16괘", "222122", "뢰지예(雷地豫)"),
    17: ("17괘", "122112", "택뢰수(澤雷隨)"),
    18: ("18괘", "211221", "산풍고(山風蠱)"),
    19: ("19괘", "112222", "지택림(地澤臨)"),
    20: ("20괘", "222211", "풍지관(風地觀)"),
    21: ("21괘", "122121", "화뢰서합(火雷噬嗑)"),
    22: ("22괘", "121221", "산화비(山火賁)"),
    23: ("23괘", "222221", "산지박(山地剝)"),
    24: ("24괘", "122222", "지뢰복(地雷復)"),
    25: ("25괘", "122111", "천뢰무망(天雷无妄)"),
    26: ("26괘", "111221", "산천대축(山天大畜)"),
    27: ("27괘", "122221", "산뢰이(山雷頤)"),
    28: ("28괘", "211112", "택풍대과(澤風大過)"),
    29: ("29괘", "212212", "감위수(坎爲水)"),
    30: ("30괘", "121121", "리위화(離爲火)"),
    31: ("31괘", "221112", "택산함(澤山咸)"),
    32: ("32괘", "211122", "뢰풍항(雷風恆)"),
    33: ("33괘", "221111", "천산둔(天山遯)"),
    34: ("34괘", "111122", "뢰천대장(雷天大壯)"),
    35: ("35괘", "222121", "화지진(火地晉)"),
    36: ("36괘", "121222", "지화명이(地火明夷)"),
    37: ("37괘", "121211", "풍화가인(風火家人)"),
    38: ("38괘", "112121", "화택규(火澤睽)"),
    39: ("39괘", "221212", "수산건(水山蹇)"),
    40: ("40괘", "212122", "뢰수해(雷水解)"),
    41: ("41괘", "112221", "산택손(山澤損)"),
    42: ("42괘", "122211", "풍뢰익(風雷益)"),
    43: ("43괘", "111112", "택천쾌(澤天夬)"),
    44: ("44괘", "211111", "천풍구(天風姤)"),
    45: ("45괘", "222112", "택지취(澤地萃)"),
    46: ("46괘", "211222", "지풍승(地風升)"),
    47: ("47괘", "212112", "택수곤(澤水困)"),
    48: ("48괘", "211212", "수풍정(水風井)"),
    49: ("49괘", "121112", "택화혁(澤火革)"),
    50: ("50괘", "211121", "화풍정(火風鼎)"),
    51: ("51괘", "122122", "진위뢰(震爲雷)"),
    52: ("52괘", "221221", "간위산(艮爲山)"),
    53: ("53괘", "221211", "풍산점(風山漸)"),
    54: ("54괘", "112122", "뢰택귀매(雷澤歸妹)"),
    55: ("55괘", "121122", "뢰화풍(雷火豊)"),
    56: ("56괘", "221121", "화산려(火山旅)"),
    57: ("57괘", "211211", "손위풍(巽爲風)"),
    58: ("58괘", "112112", "태위택(兌爲澤)"),
    59: ("59괘", "212211", "풍수환(風水渙)"),
    60: ("60괘", "112212", "수택절(水澤節)"),
    61: ("61괘", "112211", "풍택중부(風澤中孚)"),
    62: ("62괘", "221122", "뢰산소과(雷山小過)"),
    63: ("63괘", "121212", "수화기제(水火旣濟)"),
    64: ("64괘", "212121", "화수미제(火水未濟)")
}

def get_hexagram_by_pattern(pattern):
    """이진 패턴으로 괘 찾기"""
    for number, (name, binary_pattern, chinese_name) in HEXAGRAM_TABLE.items():
        if pattern == binary_pattern:
            return (number, name, chinese_name)
    return None

def get_hexagram_by_number(number):
    """괘 번호로 괘 정보 가져오기"""
    if number in HEXAGRAM_TABLE:
        name, binary_pattern, chinese_name = HEXAGRAM_TABLE[number]
        return (number, name, binary_pattern, chinese_name)
    return None

def validate_hexagram_table():
    """괘 테이블 검증 - 중복 패턴 체크"""
    patterns = []
    duplicates = []
    
    for number, (name, pattern, chinese_name) in HEXAGRAM_TABLE.items():
        if pattern in patterns:
            duplicates.append((number, name, pattern))
        else:
            patterns.append(pattern)
    
    return duplicates

def get_all_hexagrams():
    """모든 괘 정보 반환 (기존 코드 호환성용)"""
    result = {}
    for number, (name, pattern, chinese_name) in HEXAGRAM_TABLE.items():
        result[number] = (name, pattern)
    return result

if __name__ == "__main__":
    # 테이블 검증
    duplicates = validate_hexagram_table()
    if duplicates:
        print("중복된 패턴이 발견되었습니다:")
        for number, name, pattern in duplicates:
            print(f"  {number}: {name} - {pattern}")
    else:
        print("✅ 모든 64괘의 패턴이 고유합니다.")
    
    # 주요 괘들 확인
    test_cases = [
        ("122212", "3괘"),
        ("212221", "4괘"),
        ("111212", "5괘"),
        ("212111", "6괘")
    ]
    
    print("\n주요 괘 패턴 확인:")
    for pattern, expected in test_cases:
        result = get_hexagram_by_pattern(pattern)
        if result:
            number, name, chinese_name = result
            status = "✅" if name == expected else "❌"
            print(f"  {status} {pattern} → {number} {name} ({chinese_name})")
        else:
            print(f"  ❌ {pattern} → 찾을 수 없음")
    
    print(f"\n총 괘 개수: {len(HEXAGRAM_TABLE)}개") 